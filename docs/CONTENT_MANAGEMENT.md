# 内容管理功能说明

## 功能概述

「皖美」小程序现已支持全员可视化修改内容功能，所有用户都可以在小程序内直接编辑题库、景点、美食、文化等内容，无需任何权限验证。

## 功能入口

在小程序"我的"页面，"我的收藏"下方有一个醒目的徽派红色"内容管理"按钮。

## 功能模块

### 1. 内容管理总页面

点击"内容管理"按钮后，进入内容管理总页面，包含4个模块：

- **题库管理**：管理徽派文化问答题目
- **景点管理**：管理安徽著名景点内容
- **美食管理**：管理安徽特色美食内容
- **文化管理**：管理安徽历史文化内容

### 2. 题库管理

#### 功能特点
- 显示所有题目列表，包含题干、选项、正确答案和解析
- 每道题右侧有"编辑"和"删除"按钮
- 页面顶部有"新增题目"按钮

#### 操作说明

**新增题目**：
1. 点击"新增题目"按钮
2. 填写表单：
   - 题干（必填）
   - 选项A/B/C（必填）
   - 正确答案（必选，A/B/C）
   - 解析（选填）
3. 点击"保存"按钮
4. 系统提示"新增成功"

**编辑题目**：
1. 点击题目右侧的"编辑"按钮
2. 修改表单内容
3. 点击"保存"按钮
4. 系统提示"修改成功"

**删除题目**：
1. 点击题目右侧的"删除"按钮
2. 弹出确认对话框
3. 点击"删除"确认
4. 系统提示"删除成功"

### 3. 景点/美食/文化管理

#### 功能特点
- 显示对应分类的内容列表
- 每个条目显示图片、标题、副标题和统计信息
- 点击条目进入编辑页面

#### 操作说明

**编辑内容**：
1. 点击要编辑的内容条目
2. 进入编辑页面，可以修改：
   - 标题（必填）
   - 副标题（选填）
   - 描述（必填）
   - 图片URL（选填）
3. 点击"保存"按钮
4. 系统提示"修改成功"

## 数据同步

所有修改操作都会立即同步到Supabase数据库，并在小程序内实时生效：

- **题库修改**：修改后，问答页面会立即使用最新的题目
- **内容修改**：修改后，相应的列表页和详情页会显示最新内容

## 技术实现

### 数据库表

**quiz_questions（题库表）**：
- id：题目ID
- question：题干
- option_a/b/c：选项A/B/C
- correct_answer：正确答案（A/B/C）
- explanation：解析
- created_at：创建时间
- updated_at：更新时间

**contents（内容表）**：
- id：内容ID
- title：标题
- subtitle：副标题
- description：描述
- image_url：图片URL
- category：分类（scenery/food/culture/economy）
- likes_count：点赞数
- favorites_count：收藏数
- comments_count：评论数
- created_at：创建时间

### API接口

**题库管理**：
- getAllQuizQuestions()：获取所有题目
- getQuizQuestionById(id)：获取题目详情
- createQuizQuestion(question)：创建新题目
- updateQuizQuestion(id, question)：更新题目
- deleteQuizQuestion(id)：删除题目

**内容管理**：
- getContentsByCategory(category)：获取指定分类的内容列表
- getContentById(id)：获取内容详情
- updateContent(id, content)：更新内容

### 页面路由

- /pages/admin/index：内容管理总页面
- /pages/admin/quiz/index：题库管理页面
- /pages/admin/quiz/edit：题库编辑页面
- /pages/admin/content/index：内容管理页面
- /pages/admin/content/edit：内容编辑页面

## 设计风格

- 采用徽派风格设计
- 使用徽派红色（#E63946）作为主要操作按钮颜色
- 卡片式布局，内容分区清晰
- 8px圆角设计，柔和阴影效果

## 注意事项

1. **无权限验证**：所有用户都可以修改内容，请谨慎操作
2. **数据准确性**：修改内容时请确保信息准确，避免误导用户
3. **实时生效**：修改后立即生效，无需刷新页面
4. **操作反馈**：每次操作都会有明确的成功或失败提示

## 使用场景

1. **题库维护**：定期更新问答题目，保持内容新鲜
2. **内容更新**：及时更新景点、美食、文化信息
3. **错误修正**：发现内容错误时可以立即修正
4. **内容扩充**：添加新的题目和内容，丰富小程序内容

---

© 2025 皖美视界 · 发现安徽之美
