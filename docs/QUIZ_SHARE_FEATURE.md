# 问答页面分享功能说明

## 功能概述

在徽派文化小问答的答题完成结果页面添加了微信分享功能，用户可以分享自己的答题成绩。

## 实现位置

**页面**：`src/pages/quiz/index.tsx`  
**位置**：答题完成结果页面，在"返回"和"再来一次"按钮下方

## 分享内容

### 答题完成时分享
- **标题**：我在徽派文化小问答中答对了X题，正确率X%！你也来挑战吧
- **路径**：/pages/quiz/index
- **场景**：用户答题完成后，想要炫耀成绩或邀请好友挑战

### 普通分享（右上角菜单）
- **标题**：徽派文化小问答 · 测测你对安徽文化的了解
- **路径**：/pages/quiz/index

## 视觉设计

### 分享按钮样式
- **背景**：渐变色背景（bg-gradient-primary）
- **文字**：白色文字（text-white）
- **图标**：分享图标（i-mdi-share-variant）+ "分享我的成绩"文字
- **布局**：全宽按钮，图标+文字水平居中
- **圆角**：8px圆角（rounded-lg）
- **内边距**：py-3（垂直方向）

### 按钮位置
```
┌─────────────────────────────┐
│      答题完成！              │
│                             │
│   ┌───────────────────┐    │
│   │   正确率 100%     │    │
│   └───────────────────┘    │
│                             │
│   ┌───────────────────┐    │
│   │  恭喜获得印章！    │    │
│   └───────────────────┘    │
│                             │
│   ┌─────┐  ┌─────────┐    │
│   │返回 │  │再来一次 │    │
│   └─────┘  └─────────┘    │
│                             │
│   ┌───────────────────┐    │
│   │ 📤 分享我的成绩   │    │ ← 新增分享按钮
│   └───────────────────┘    │
└─────────────────────────────┘
```

## 技术实现

### 动态分享标题
```typescript
useShareAppMessage(() => {
  if (showResult && currentQuestions.length > 0) {
    const accuracy = Math.round((correctCount / currentQuestions.length) * 100)
    return {
      title: `我在徽派文化小问答中答对了${correctCount}题，正确率${accuracy}%！你也来挑战吧`,
      path: '/pages/quiz/index'
    }
  }
  return {
    title: '徽派文化小问答 · 测测你对安徽文化的了解',
    path: '/pages/quiz/index'
  }
})
```

### 环境兼容
```typescript
const isWeApp = getEnv() === 'WEAPP'

<Button
  {...(isWeApp ? {openType: 'share'} : {onClick: handleShare})}
>
  分享我的成绩
</Button>
```

## 用户场景

### 场景1：炫耀高分
- 用户答对5题，正确率100%
- 点击"分享我的成绩"按钮
- 分享标题："我在徽派文化小问答中答对了5题，正确率100%！你也来挑战吧"
- 好友看到后也想尝试

### 场景2：邀请挑战
- 用户答对3题，正确率60%
- 点击"分享我的成绩"按钮
- 分享标题："我在徽派文化小问答中答对了3题，正确率60%！你也来挑战吧"
- 好友看到后想要超越

### 场景3：获得印章后分享
- 用户答对4题及以上，获得"徽文化达人"印章
- 点击"分享我的成绩"按钮
- 分享成绩的同时炫耀印章成就

## 分享效果示例

### 高分分享
```
我在徽派文化小问答中答对了5题，正确率100%！你也来挑战吧
```

### 中等分数分享
```
我在徽派文化小问答中答对了3题，正确率60%！你也来挑战吧
```

### 低分分享
```
我在徽派文化小问答中答对了1题，正确率20%！你也来挑战吧
```

## 优势特点

1. **动态内容**：分享标题根据实际答题成绩动态生成
2. **激励机制**：无论分数高低都鼓励分享，增加传播
3. **视觉突出**：渐变色背景+图标，吸引用户点击
4. **位置合理**：在结果页面底部，用户自然会看到
5. **环境兼容**：H5环境显示提示，微信小程序正常分享

## 测试要点

- [ ] 微信小程序环境：点击分享按钮能正常触发分享面板
- [ ] 分享标题包含正确的答题数量和正确率
- [ ] H5环境：点击分享按钮显示Toast提示
- [ ] 分享按钮样式美观，渐变色背景显示正常
- [ ] 图标和文字对齐居中
- [ ] 分享后好友能正常打开问答页面

## 相关文档

- 微信分享功能总文档：`docs/SHARE_FEATURE.md`
- 问答功能文档：`docs/QUIZ_RANDOM_AND_DAILY_LIMIT.md`
- 分享功能总结：`docs/SHARE_FEATURE_SUMMARY.md`

## 版本信息

- **版本号**：v1.1.0
- **更新日期**：2025-12-29
- **开发者**：秒哒AI助手
- **项目名称**：皖美视界 - 安徽介绍微信小程序
